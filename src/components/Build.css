.build-page {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 1.5rem;
  color: #f8fafc;
}

.build-carousel {
  width: min(100%, 960px);
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 1.5rem;
  overflow: visible;
}

.carousel-stage {
  position: relative;
  height: clamp(20rem, 28vw, 24rem);
  perspective: 1600px;
  overflow: visible;
  transform-style: preserve-3d;
}

.carousel-stage[data-animating='true'] {
  pointer-events: none;
}

.carousel-stage[data-direction='next'][data-animating='true'] {
  animation: carousel-stage-tilt-next 420ms cubic-bezier(0.22, 0.61, 0.36, 1);
}

.carousel-stage[data-direction='previous'][data-animating='true'] {
  animation: carousel-stage-tilt-prev 420ms cubic-bezier(0.22, 0.61, 0.36, 1);
}

.carousel-card {
  --card-width: clamp(12rem, 16vw, 14.5rem);
  --card-height: clamp(16rem, 24vw, 22rem);
  --offset-small: clamp(9rem, 12vw, 11.5rem);
  --offset-large: clamp(16rem, 22vw, 18.5rem);
  --tilt-angle: 14deg;
  --card-radius: 1.75rem;

  position: absolute;
  top: 50%;
  left: 50%;
  width: var(--card-width);
  height: var(--card-height);
  transform: translate(-50%, -50%);
  border-radius: var(--card-radius);
  display: flex;
  align-items: center;
  justify-content: center;
  transition:
    transform 420ms cubic-bezier(0.22, 0.61, 0.36, 1),
    opacity 320ms ease,
    filter 320ms ease,
    z-index 0ms step-end 420ms;
  transform-origin: center center;
  will-change: transform, opacity, filter;
}

.carousel-card[data-offset='0'] {
  transform: translate(-50%, -50%) scale(1) rotateY(0deg);
  z-index: 5;
  opacity: 1;
  filter: none;
  box-shadow:
    0 28px 56px rgba(0, 0, 0, 0.5),
    inset 0 0 0 4px rgba(15, 23, 42, 0.35);
}

.carousel-card[data-offset='-1'] {
  transform: translate(calc(-50% - var(--offset-small)), -50%) scale(0.85) rotateY(var(--tilt-angle));
  z-index: 4;
  opacity: 0.9;
  filter: brightness(0.94);
}

.carousel-card[data-offset='1'] {
  transform: translate(calc(-50% + var(--offset-small)), -50%) scale(0.85) rotateY(calc(var(--tilt-angle) * -1));
  z-index: 4;
  opacity: 0.9;
  filter: brightness(0.94);
}

.carousel-card[data-offset='-2'] {
  transform: translate(calc(-50% - var(--offset-large)), -50%) scale(0.7) rotateY(calc(var(--tilt-angle) * 1.8));
  z-index: 3;
  opacity: 0.6;
  filter: brightness(0.85) blur(0.6px);
}

.carousel-card[data-offset='2'] {
  transform: translate(calc(-50% + var(--offset-large)), -50%) scale(0.7) rotateY(calc(var(--tilt-angle) * -1.8));
  z-index: 3;
  opacity: 0.6;
  filter: brightness(0.85) blur(0.6px);
}

.carousel-card .blueprint-material {
  width: 100%;
  height: 100%;
  border-radius: calc(var(--card-radius) - clamp(0.2rem, 0.5vw, 0.45rem));
  --bp-border-padding: clamp(0.7rem, 1.05vw, 0.95rem);
  --bp-bg: #0b3575;
  --bp-grid-major: rgba(255, 255, 255, 0.55);
  --bp-grid-minor: rgba(255, 255, 255, 0.3);
  --bp-border: rgba(214, 239, 255, 0.92);
  --bp-outline: rgba(164, 216, 255, 1);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow:
    0 24px 46px rgba(6, 17, 38, 0.6),
    inset 0 0 18px rgba(7, 25, 52, 0.8);
  transition:
    transform 420ms cubic-bezier(0.22, 0.61, 0.36, 1),
    filter 320ms ease;
  backface-visibility: hidden;
  transform-style: preserve-3d;
}

.carousel-card .blueprint-material::before,
.carousel-card .blueprint-material::after {
  border-radius: calc(var(--card-radius) - clamp(0.7rem, 1.2vw, 1.05rem));
  opacity: 0.95;
}

.carousel-card .blueprint-material::after {
  background-image:
    linear-gradient(rgba(255, 255, 255, 0.45) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255, 255, 255, 0.45) 1px, transparent 1px),
    linear-gradient(rgba(255, 255, 255, 0.18) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255, 255, 255, 0.18) 1px, transparent 1px),
    radial-gradient(circle at 25% 0%, rgba(255, 255, 255, 0.25), transparent 55%),
    radial-gradient(circle at 100% 100%, rgba(0, 0, 0, 0.65), transparent 60%);
  background-size:
    40px 40px,
    40px 40px,
    8px 8px,
    8px 8px,
    240px 240px,
    320px 320px;
  opacity: 0.85;
}

.carousel-card .blueprint-material img {
  width: 78%;
  height: 78%;
  border-radius: clamp(0.5rem, 0.95vw, 0.85rem);
  box-shadow: 0 12px 22px rgba(0, 0, 0, 0.28);
}

.carousel-card__label {
  position: absolute;
  left: 50%;
  bottom: clamp(0.7rem, 1.6vw, 1.2rem);
  transform: translateX(-50%);
  padding: 0.35rem 0.9rem;
  text-align: center;
  line-height: 1.1;
  font-size: clamp(0.75rem, 1.15vw, 1.05rem);
  font-weight: 700;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: rgba(236, 244, 255, 0.96);
  background: rgba(6, 20, 42, 0.78);
  border-radius: 999px;
  box-shadow: 0 8px 16px rgba(4, 12, 28, 0.6);
  pointer-events: none;
  z-index: 3;
  text-shadow: 0 1px 0 rgba(9, 21, 44, 0.45);
  transition: transform 420ms cubic-bezier(0.22, 0.61, 0.36, 1);
}

.carousel-button {
  width: 3.5rem;
  height: 3.5rem;
  border-radius: 999px;
  background: rgba(15, 23, 42, 0.65);
  color: #e2e8f0;
  border: 2px solid rgba(248, 250, 252, 0.3);
  font-size: 1.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 200ms ease, background 200ms ease, color 200ms ease;
  position: relative;
  z-index: 6;
}

.carousel-button:hover {
  background: rgba(248, 250, 252, 0.85);
  color: #0f172a;
  transform: scale(1.05);
}

.carousel-button:active {
  transform: scale(0.96);
}

.carousel-helper-text {
  font-size: 0.95rem;
  letter-spacing: 0.04em;
  opacity: 0.8;
  max-width: 32rem;
}

@keyframes carousel-stage-tilt-next {
  0% {
    transform: rotateY(0deg);
  }
  35% {
    transform: rotateY(-4deg);
  }
  70% {
    transform: rotateY(2deg);
  }
  100% {
    transform: rotateY(0deg);
  }
}

@keyframes carousel-stage-tilt-prev {
  0% {
    transform: rotateY(0deg);
  }
  35% {
    transform: rotateY(4deg);
  }
  70% {
    transform: rotateY(-2deg);
  }
  100% {
    transform: rotateY(0deg);
  }
}

